<div id="main-container">

{{!--   <div id="blog-posts-header">
    <h1>WELCOME</h1>
  </div> --}}
{{!--  --}}
  <div class="newpost-options">
    {{#if newBlogPost}}
      <div>
        <form id="form-newpost" {{action 'newPost' model.blogPost on="submit"}}>
          <h2 class="form-signin-heading">New Post</h2>

          {{!-- AVAILABLE ONLY IN PRIVATE MODE - ADD FRIENDS --}}
          {{#if private}}
            <div class="options-addfriends" {{action "toggleShowFriendsList"}} >
              <h2> ADD FRIENDS </h2>
            </div>
            {{#if showFriendsList}}
              <div class="tokens-friendslist">
                {{#each session.data.authenticated.user.friends as |friend|}}
                  <button class="tokens-friend" {{action "addfriend" friend}}> + {{friend.username}} </button>
                {{/each}}
              </div>

              <div class="tokens-xfriendslist">
                <h2> Friends Added To This Post: </h2>
                {{#each modelFriendsArray as |modelFriend|}}
                  <button class="token-xfriend" {{action "removefriend" modelFriend}} > x {{modelFriend.username}} </button>
                {{/each}}
              </div>

            {{/if}}
          {{/if}}

          {{!-- STANDARD BLOG-POST INPUTS ... PRIVATE and PUBLIC --}}
          {{input class="newpost-title" type="title" type="text" placeholder="Title" value=title}}<br>
          {{input class="newpost-subtitle" type="subtitle" type="text" placeholder="Sub Title" value=subtitle}}<br>
          {{textarea id="blogpost-textarea" class="newpost-content" type="content" type="text" placeholder="Content" value=postcontent}}<br>

          <button class="newpost-post-button" type="submit" type="blogPost"> Post </button>
          <button class="newpost-cancel-button" {{action "toggleNewPost"}} > Cancel </button>

        </form>
      </div>

    {{else}}
      <div>
        <div class="newpost-button">
          <button {{action "toggleNewPost" "private"}} > PRIVATE </button>
        </div>
        <div class="newpost-button">
          <button {{action "toggleNewPost" "public"}}> PUBLIC </button>
        </div>
      </div>
    {{/if}}

  </div>


  <div id="user-container">
    <div id="blogposts-container" class="blogposts-split">
      {{#each reverse as |post|}}
        <div class="blogpost">

          <div class="blogpost-upperdiv">
            <h2 class="blogpost-title">{{post.title}}</h2>
            <h4 class="blogpost-subtitle">{{post.subtitle}}</h4>
            <p class="blogpost-author"> written by
              {{#link-to "profile-public" post.owner}} {{!-- Link-to will automatically use the post.owners id property https://guides.emberjs.com/v2.10.0/templates/links/  --}}
                <h3>{{post.owner.username}}</h3>
              {{/link-to}} 
            </p>
            <p class="blogpost-date">{{post.date}}</p>
            <h5 class="blogpost-{{post.blogType}}"></h5>
          </div>
          
          <div class="blogpost-lowerdiv">
            Readers: 
            {{#each post.friends as |friend|}}
              {{#link-to "profile-public" friend._id}} 
                <h3 class="chip inline chip-small yellow-blue"> {{friend.username}} </h3>
              {{/link-to}}
            {{/each}}
            
            <div class="chip inline chip-small green-yellow"> + </div>

            <p class="blogpost-content"> {{post.content}} </p>
          </div>
            <button class="newpost-delete-button" {{action 'deletePost' post.id}}> Delete </button>

        </div>
      {{/each}}

    </div>

    <div id="friendslist-container" class="friendslist-split">
      <h1> Friends: </h1>
      {{#each session.data.authenticated.user.friends as |friend|}}
        {{#link-to "profile-public" friend._id}} <a class="chip block chip-large blue-yellow"> {{friend.username}}</a> {{/link-to}}
      {{/each}}
    </div>
  </div>

</div>
